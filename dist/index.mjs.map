{"version":3,"file":"index.mjs","sources":["../src/index.ts"],"sourcesContent":["import { reporters } from 'mocha';\nimport { ApplauseReporter, TestResultStatus, } from 'applause-reporter-common';\nimport { Runner } from 'mocha';\nconst _options = require(process.cwd() + '/applause.json');\nconst options = _options;\n// import * as cli from 'mocha/lib/cli';\nexport default class ApplauseMochaReporter extends reporters.Base {\n    reporter;\n    constructor(runner) {\n        super(runner);\n        this.reporter = new ApplauseReporter(options);\n        runner.once(Runner.constants.EVENT_SUITE_BEGIN, suite => {\n            // Parse each test case name from the suite\n            const tests = [];\n            suite.eachTest(t => tests.push(t.fullTitle()));\n            void this.reporter.runnerStart(tests);\n        });\n        /*\n         * make reporter to write to the output stream by default\n         */\n        runner\n            .on(Runner.constants.EVENT_TEST_BEGIN, (testcase) => {\n            void this.reporter.startTestCase(testcase.id, testcase.fullTitle());\n        })\n            .on(Runner.constants.EVENT_TEST_PASS, (testcase) => {\n            void this.reporter.submitTestCaseResult(testcase.id, TestResultStatus.PASSED);\n        })\n            .on(Runner.constants.EVENT_TEST_FAIL, (testcase, error) => {\n            void this.reporter.submitTestCaseResult(testcase.id, TestResultStatus.FAILED, { failureReason: error.message });\n        })\n            .once(Runner.constants.EVENT_RUN_END, () => {\n            void this.reporter.runnerEnd();\n        });\n    }\n}\n//# sourceMappingURL=index.js.map"],"names":[],"mappings":";;;AAGA,MAAM,QAAQ,GAAG,OAAO,CAAC,OAAO,CAAC,GAAG,EAAE,GAAG,gBAAgB,CAAC,CAAC;AAC3D,MAAM,OAAO,GAAG,QAAQ,CAAC;AACzB;AACe,MAAM,qBAAqB,SAAS,SAAS,CAAC,IAAI,CAAC;AAClE,IAAI,QAAQ,CAAC;AACb,IAAI,WAAW,CAAC,MAAM,EAAE;AACxB,QAAQ,KAAK,CAAC,MAAM,CAAC,CAAC;AACtB,QAAQ,IAAI,CAAC,QAAQ,GAAG,IAAI,gBAAgB,CAAC,OAAO,CAAC,CAAC;AACtD,QAAQ,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,iBAAiB,EAAE,KAAK,IAAI;AACjE;AACA,YAAY,MAAM,KAAK,GAAG,EAAE,CAAC;AAC7B,YAAY,KAAK,CAAC,QAAQ,CAAC,CAAC,IAAI,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;AAC3D,YAAY,KAAK,IAAI,CAAC,QAAQ,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;AAClD,SAAS,CAAC,CAAC;AACX;AACA;AACA;AACA,QAAQ,MAAM;AACd,aAAa,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,gBAAgB,EAAE,CAAC,QAAQ,KAAK;AACjE,YAAY,KAAK,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,EAAE,EAAE,QAAQ,CAAC,SAAS,EAAE,CAAC,CAAC;AAChF,SAAS,CAAC;AACV,aAAa,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC,QAAQ,KAAK;AAChE,YAAY,KAAK,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,CAAC,EAAE,EAAE,gBAAgB,CAAC,MAAM,CAAC,CAAC;AAC1F,SAAS,CAAC;AACV,aAAa,EAAE,CAAC,MAAM,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC,QAAQ,EAAE,KAAK,KAAK;AACvE,YAAY,KAAK,IAAI,CAAC,QAAQ,CAAC,oBAAoB,CAAC,QAAQ,CAAC,EAAE,EAAE,gBAAgB,CAAC,MAAM,EAAE,EAAE,aAAa,EAAE,KAAK,CAAC,OAAO,EAAE,CAAC,CAAC;AAC5H,SAAS,CAAC;AACV,aAAa,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC,aAAa,EAAE,MAAM;AACxD,YAAY,KAAK,IAAI,CAAC,QAAQ,CAAC,SAAS,EAAE,CAAC;AAC3C,SAAS,CAAC,CAAC;AACX,KAAK;AACL;;;;"}