!function(e,s){"object"==typeof exports&&"undefined"!=typeof module?module.exports=s(require("mocha"),require("applause-reporter-common")):"function"==typeof define&&define.amd?define(["mocha","applause-reporter-common"],s):(e="undefined"!=typeof globalThis?globalThis:e||self)["mocha-applause-reporter"]=s(e.mocha,e.applauseReporterCommon)}(this,(function(e,s){"use strict";class t extends e.reporters.Base{reporter;sessionIdMap=new Map;constructor(t){super(t);const o=s.loadConfig();this.reporter=new s.ApplauseReporter(o),t.once(e.Runner.constants.EVENT_SUITE_BEGIN,(e=>{const s=[];e.eachTest((e=>s.push(e.fullTitle()))),this.reporter.runnerStart(s)})),t.on(e.Runner.constants.EVENT_TEST_BEGIN,(e=>{this.listenToSessionId(e),this.reporter.startTestCase(e.id,e.fullTitle())})).on(e.Runner.constants.EVENT_TEST_PASS,(e=>{this.reporter.submitTestCaseResult(e.id,s.TestResultStatus.PASSED,{providerSessionGuids:this.sessionIdMap.get(e.id)||[]})})).on(e.Runner.constants.EVENT_TEST_PENDING,(e=>{this.reporter.submitTestCaseResult(e.id,s.TestResultStatus.SKIPPED,{providerSessionGuids:this.sessionIdMap.get(e.id)||[]})})).on(e.Runner.constants.EVENT_TEST_FAIL,((e,t)=>{this.reporter.submitTestCaseResult(e.id,s.TestResultStatus.FAILED,{failureReason:t.message,providerSessionGuids:this.sessionIdMap.get(e.id)||[]})})).once(e.Runner.constants.EVENT_RUN_END,(()=>{this.reporter.runnerEnd()}))}recordSessionId(e,s){this.sessionIdMap.set(e,[...this.sessionIdMap.get(e)||[],s])}listenToSessionId(e){e.on("applause-session-id-register",(s=>this.recordSessionId(e.id,s)))}}return t}));
//# sourceMappingURL=index.min.js.map
